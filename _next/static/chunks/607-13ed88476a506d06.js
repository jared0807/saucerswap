"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{64607:function(e,t,n){var o=n(85893),a=n(73400),i=n(90615),r=n(618),u=n(17210),s=n(90056),l=n(11582),d=n(51115),c=n(39499),p=n.n(c),k=n(47808),f=n(71894),m=n(91402),h=n(65074);t.Z=e=>{let{errorMessage:t,onComplete:n,position:c,migrateOptions:w,actionTitle:T="",...g}=e,{enqueueSnackbar:v}=(0,a.Ds)(),y=[{hook:i.Z,data:{position:c,removeOptions:{...w,burnToken:!0,liquidityPercentage:new m.gG(1,1)}}}],I=(0,u.aV)(c.pool),S=(0,u.LR)(c.pool),Z=[],N=r.VW.indexOf(c.nftTokenId),x=[];if(Z.push({tokenId:d.Rp.fromString("".concat(c.nftTokenId,"/").concat(c.tokenSN)).toString(),spenderAccountId:r.D0[N],isNft:!0}),w.remint){x.push(h.zv[h.zv.length-1]),y.push({hook:f.Z,data:{position:c,addOptions:{slippageTolerance:w.slippageTolerance,type:"mint"}}});let{amount0:e,amount1:t}=c.mintAmounts;p().greaterThan(e,k.xE)&&!(0,u.F$)(c.pool.token0.address)&&Z.push({tokenId:c.pool.token0.address,spenderAccountId:r.D0[r.D0.length-1],amount:p().toNumber(e)}),p().greaterThan(t,k.xE)&&!(0,u.F$)(c.pool.token1.address)&&Z.push({tokenId:c.pool.token1.address,spenderAccountId:r.D0[r.D0.length-1],amount:p().toNumber(t)})}return(0,o.jsx)(s.RC,{disabled:I&&!S,errorMessage:t||"",fullWidth:!0,message:"Success!",smartContractBuilders:y,tokensToAssociate:x,tokensToApprove:Z,...g,onFinalSuccess:e=>{v((0,o.jsx)(l.Z,{header:w.remint?"Liquidity Migrated":"Liquidity Burned",message:w.remint?"Position migrated successfully.":"Position burned successfully.",transactionId:e.transactionId}),{variant:"info"}),n&&n()},children:w.remint?"Migrate Full Position":"Burn Position"})}},90615:function(e,t,n){n.d(t,{Z:function(){return Z}});var o=n(85945),a=n(70794),i=n(55703),r=n(63046),u=n(4002),s=n(49004),l=n(51115),d=n(73400),c=n(67294),p=n(27777),k=n(618),f=n(17210),m=n(36576),h=n(13217),w=n(80608);n(4878);let T=e=>{let{tokenSN:t,nftTokenId:n}=e,o=[];o.push({type:"uInt256",value:t});let r=k.VW.indexOf(n);return{type:i.R.ContractExecuteTransaction,contractId:k.D0[r],functionName:g,gas:2e5,params:o,payable:new a.Z(0)}},g="burn";var v=n(74082);let y=(e,t)=>{if(!t.userWallet)throw Error("Missing active account");let{amount0Min:n,amount1Min:o,tokenSN:r,liquidity:u}=e,s=[];s.push({type:"tuple",value:[r,u.toFixed(0),n.toFixed(0),o.toFixed(0),(new Date().getTime()+k.T3).toString()]});let l=k.VW.indexOf(e.nftTokenId);return{type:i.R.ContractExecuteTransaction,contractId:k.D0[l],functionName:I,gas:35e4,params:s,payable:new a.Z(0)}},I="decreaseLiquidity";var S=n(72833),Z=(e,t)=>{let{settings:n}=(0,s.r)(),{hbarAddress:g}=(0,S.O)(),{position:I,removeOptions:Z}=e,N=(0,f.F$)(I.pool.token0.address),x=(0,f.F$)(I.pool.token1.address),{enqueueSnackbar:M}=(0,d.Ds)(),b=(0,c.useMemo)(()=>{let t=[];return t.push("decreaseLiquidity"),t.push("collect"),e.removeOptions.liquidityPercentage.equalTo(1)&&e.removeOptions.burnToken&&t.push("burn"),(N||x)&&t.push("unwrapHBAR"),"Multicall: "+t.join(", ")},[e.removeOptions.burnToken,e.removeOptions.liquidityPercentage,N,x]),q=k.VW.indexOf(I.nftTokenId),A=(0,o.NL)();return(0,w.Z)({getContracts:()=>{let t=[],{position:o,removeOptions:s}=e;console.log("data:",e);let d=new r.L({pool:o.pool,liquidity:s.liquidityPercentage.multiply(o.liquidity).quotient,tickLower:o.tickLower,tickUpper:o.tickUpper}),c=(0,u.ZH)(n.slippage),f=d.burnAmountsWithSlippage(s.slippageTolerance||c),w=f.amount0,g=f.amount1;if(t.push(y({liquidity:new a.Z(d.liquidity.toString()),tokenSN:s.tokenSN,nftTokenId:s.nftTokenId,amount0Min:new a.Z(w.toString()),amount1Min:new a.Z(g.toString())},n)),t.push((0,v.in)({tokenSN:s.tokenSN,nftTokenId:s.nftTokenId,amount0Max:N?new a.Z(0):p.Zw,amount1Max:x?new a.Z(0):p.Zw},n)),(N||x)&&t.push((0,v.in)({tokenSN:s.tokenSN,nftTokenId:s.nftTokenId,addressToCollect:l.hX.fromString(k.D0[q]).toSolidityAddress(),amount0Max:N?p.Zw:new a.Z(0),amount1Max:x?p.Zw:new a.Z(0)},n)),s.liquidityPercentage.equalTo(1))s.burnToken&&t.push(T({tokenSN:s.tokenSN,nftTokenId:s.nftTokenId}));else if(s.burnToken)throw Error("Cannot burn token without removing all liquidity");if(N||x){if(!n.userWallet)throw Error("Missing active account");t.push({type:i.R.ContractExecuteTransaction,contractId:k.D0[q],functionName:"unwrapWHBAR",params:[{type:"uInt256",value:new a.Z(0)},{type:"address",value:(0,m.aA)(n)}],gas:h.nj+2e5})}return t},description:b,contractId:k.D0[q]},{...t,onSuccess:async(e,n,o)=>{var a;await (null==t?void 0:null===(a=t.onSuccess)||void 0===a?void 0:a.call(t,e,n,o)),Z.burnToken&&M("LARI rewards will still be paid for the duration of the position at the end of epoch",{variant:"info"}),setTimeout(async()=>{I.tokenSN&&await A.invalidateQueries(["myPositionV2",I.tokenSN,Z.nftTokenId]),A.invalidateQueries(["myPositionsV2"]),A.invalidateQueries(["feesFromContract"]),A.invalidateQueries(["poolsV2"])},5e3)}})}},74082:function(e,t,n){n.d(t,{P_:function(){return T},a8:function(){return w},in:function(){return h}});var o=n(51115),a=n(85945),i=n(70794),r=n(67294),u=n(55703),s=n(50791),l=n(618),d=n(17210),c=n(36576),p=n(79361),k=n(49004);n(4878);var f=n(13217),m=n(80608);let h=(e,t)=>{if(!t.userWallet)throw Error("Missing active account");let{tokenSN:n,nftTokenId:o,amount0Max:a=s.Zw,amount1Max:r=s.Zw,addressToCollect:d=(0,c.aA)(t)}=e,p=[];p.push({type:"tuple",value:[n,d,a.toFixed(0),r.toFixed(0)]});let k=l.VW.indexOf(o);return{type:u.R.ContractExecuteTransaction,contractId:l.D0[k],functionName:"collect",gas:3e5,params:p,payable:new i.Z(0)}},w=(e,t)=>{let{settings:n}=(0,k.r)(),{data:w}=(0,p.nr)(e.tokenSN,e.nftTokenId),T=(0,d.F$)((null==w?void 0:w.pool.token0.address)||""),g=(0,d.F$)((null==w?void 0:w.pool.token1.address)||""),v=(0,r.useMemo)(()=>{let e=[];return e.push("collect"),(T||g)&&e.push("unwrapHBAR"),"Multicall: "+e.join(", ")},[T,g]),y=l.VW.indexOf(e.nftTokenId),I=(0,a.NL)();return(0,m.Z)({getContracts:()=>{if(!n.userWallet)throw Error("Missing active account");let t=[];return t.push(h({tokenSN:e.tokenSN,nftTokenId:e.nftTokenId,amount0Max:T?new i.Z(0):s.Zw,amount1Max:g?new i.Z(0):s.Zw},n)),(T||g)&&(t.push(h({tokenSN:e.tokenSN,nftTokenId:e.nftTokenId,addressToCollect:o.hX.fromString(l.D0[y]).toSolidityAddress(),amount0Max:T?s.Zw:new i.Z(0),amount1Max:g?s.Zw:new i.Z(0)},n)),t.push({type:u.R.ContractExecuteTransaction,contractId:l.D0[y],functionName:"unwrapWHBAR",params:[{type:"uInt256",value:new i.Z(0)},{type:"address",value:(0,c.aA)(n)}],gas:f.nj+4e5})),t},description:v,contractId:l.D0[y]},{...t,onSuccess:async(e,n,o)=>{var a;await (null==t?void 0:null===(a=t.onSuccess)||void 0===a?void 0:a.call(t,e,n,o)),setTimeout(async()=>{I.invalidateQueries(["feesFromContract"])},5e3)}})},T=e=>e.map(e=>({hook:w,data:{tokenSN:e.tokenSN,nftTokenId:e.nftTokenId}}))}}]);